# Детектор аномальных состояний сервера

## Описание модулей

### aggregators
Содержит классы агрегации данных.

На данный момент доступны следующие:
- default - класс агрегации по умолчанию

### algorythms
Содержит классы алгоритмов детектирования аномалий.

На данный моменты доступны следующие:
- default - класс алгоритма по умолчанию

### collectors
Cодержит классы сбора данных.

На данный моменты доступны следующие:
- csv - класс для сбора данных в csv файл
- db - класс для сбора данных в базу данных

### data_getters
Содержит классы для получения данных.

На данный моменты доступны следующие:
- process - класс для сбора данных через psutil

### db
Модуль базы данных.

### loggers
Содержит классы логеров.

На данный моменты доступны следующие:
- console - класс для логирования в консоль
- db - класс для логирования в базу данных
- file - класс для логирования в файл

### collect.py
Скрипт для сбора исторических данных.

Параметры скрипта:
- `--collector` - тип [сборщика данных](#collectors)
- `--filename` - название файла для csv сборщика
- `--interval` - интервал для сбора данных в секундах
- `--use_rand` - использовать случайный интервал для сбора данных
- `--min_interval` - минимальный интервал для случайного интервала
- `--max_interval` - максимальный интервал для случайного интервала

#### Пример использования
```bash
python collect.py --collector db --interval 30
```
Каждые 30 секунд будут собираться данные в базу данных

### detect.py
Основной модуль для детектирования аномалий.

Параметры модуля:
- `--collector` - тип [сборщика данных](#collectors)
- `--collector_filename` - название файла для csv сборщика
- `--interval` - интервал для запуска детектора в секундах
- `--logger` - тип [логера](#loggers)
- `--logger_filename` - название для файлового логера
- `--aggregator` - тип [агрегатора](#aggregators)
- `--detector` - тип [детектора](#algorythms)
- `--data_getter` - тип [получения данных](#data_getters)
- `--verbose` - выводить дополнительную информацию

#### Пример использования
```bash
python detect.py --collector db --interval 1 --logger file --verbose true
```
Каждую секунду будет вызываться детектор, в случае если аномалии будут обнаружены, они будут залогированы в файл, в противном
случае данные за текущий период будут записаны в базу данных.

### import.py
Скрипт для импорта данных из csv в базу данных.

Параметры скрипта:
- `--file_type` - тип импортируемого файла (csv, xlsx)
- `--filename` - название файла из корого импортируем

#### Пример использования
```bash
python import.py --file_type csv --filename data.csv
```
Импортируем данные из csv файла data.csv
